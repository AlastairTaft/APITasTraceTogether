<!DOCTYPE html>
<head>
  <script type="text/javascript" src="./js/xml2json.js"></script>
</head>
<body>

  <h1>Help track the spread</h1>
  
  <p>
    Submit your location data and we will anonymously use it to track the 
    virus spread.
  </p>

  <p>Currently there's two ways to get your location history.</p>
  <p>
    1) Visit your 
    <a href="https://www.google.com/maps/timeline" target="_blank">
      Google Maps Timeline
    </a> and for every recent day, select it on the left.
    <img 
      src="./img/google-timeline-select-date-screenshot.png" 
      alt="google timeline select date screnshot"
    />
  </p>

  <p>Then export the KML file via the settings button on the right.
    <img 
      src="./img/google-timeline-export-kml-screenshot.png" 
      alt="google timeline export kml screenshot" 
    />
  </p>

  <input type="file" id="files-input" />
  <input type="number" id="infection-input" placeholder="Estimated days since infection" />
  <script type="text/javascript">

    var handleFileRead = function(event){
      var xml = parseXml(event.target.result)
      var json = JSON.parse(xml2json(xml, '  '))
      debugger
    }

    var handleFileError = function(event){
      throw event.target.error
    }

    var handleFileInput = function(e){
      var file = e.target.files[0]
      var reader = new FileReader()
      reader.addEventListener('load', handleFileRead)
      reader.addEventListener('error', handleFileError)
      reader.readAsText(file, "UTF-8")
    }

    var fileInput = document.getElementById('files-input')
    fileInput.addEventListener('change', handleFileInput)
  </script>
</body>
</html>